import{c as h,i as v}from"./version-Ceh7G5a-.js";import"./mobileMenu-Y-8SxjNx.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-taxVzkwL.js";import{G as I,k as f,l as u,m as D,f as F,g as b,d as k}from"./main-BBpb6J13.js";import{P as E}from"./PDFButton-BRxkI6_c.js";import"./index-DMQTJy3b.js";I.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const o={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();function y(){h({icons:v});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),n=document.getElementById("back-to-tools"),r=document.getElementById("process-btn");t&&(t.addEventListener("change",C),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",a=>{a.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",a=>{a.preventDefault(),e.classList.remove("border-indigo-500"),a.dataTransfer?.files.length&&P(a.dataTransfer.files)})),n&&n.addEventListener("click",()=>{window.location.href="/"}),r&&r.addEventListener("click",A)}function C(t){const e=t.target;e.files?.length&&P(e.files)}async function P(t){const e=t[0];if(!e||e.type!=="application/pdf"){f("Invalid File","Please upload a valid PDF file.");return}u("Loading PDF...");try{const n=await e.arrayBuffer();o.pdfDoc=await E.load(n),o.file=e,S(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(n){console.error(n),f("Error","Failed to load PDF file.")}finally{D()}}function S(){const t=document.getElementById("file-display-area");if(!t||!o.file||!o.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const n=document.createElement("div");n.className="flex flex-col flex-1 min-w-0";const r=document.createElement("div");r.className="truncate font-medium text-gray-200 text-sm mb-1",r.textContent=o.file.name;const a=document.createElement("div");a.className="text-xs text-gray-400",a.textContent=`${F(o.file.size)} â€¢ ${o.pdfDoc.getPageCount()} pages`,n.append(r,a);const s=document.createElement("button");s.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",s.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',s.onclick=L,e.append(n,s),t.appendChild(e),h({icons:v})}function L(){o.file=null,o.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function A(){if(!o.pdfDoc||!o.file){f("Error","Please upload a PDF file first.");return}u("Inverting PDF colors...");try{const t=await E.create(),e=await o.pdfDoc.save(),n=await b({data:e}).promise;for(let a=1;a<=n.numPages;a++){u(`Processing page ${a} of ${n.numPages}...`);const s=await n.getPage(a),m=s.getViewport({scale:1.5}),d=document.createElement("canvas");d.width=m.width,d.height=m.height;const p=d.getContext("2d");await s.render({canvasContext:p,viewport:m,canvas:d}).promise;const w=p.getImageData(0,0,d.width,d.height),l=w.data;for(let i=0;i<l.length;i+=4)l[i]=255-l[i],l[i+1]=255-l[i+1],l[i+2]=255-l[i+2];p.putImageData(w,0,0);const B=await new Promise(i=>d.toBlob(x=>{const g=new FileReader;g.onload=()=>i(new Uint8Array(g.result)),g.readAsArrayBuffer(x)},"image/png")),c=await t.embedPng(B);t.addPage([c.width,c.height]).drawImage(c,{x:0,y:0,width:c.width,height:c.height})}const r=await t.save();k(new Blob([new Uint8Array(r)],{type:"application/pdf"}),"inverted.pdf"),f("Success","Colors inverted successfully!","success",()=>{L()})}catch(t){console.error(t),f("Error","Could not invert PDF colors.")}finally{D()}}
