import{c as P,i as k}from"./version-Ceh7G5a-.js";import"./mobileMenu-Y-8SxjNx.js";import"./full-width-CrKHpSp0.js";import"./simple-mode-footer-taxVzkwL.js";import{k as y,l as F,m as S,f as $,h as O,d as _}from"./main-BBpb6J13.js";import{P as U,S as j,r as R}from"./PDFButton-BRxkI6_c.js";import"./index-DMQTJy3b.js";const a={file:null,pdfDoc:null};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();function I(){P({icons:k});const t=document.getElementById("file-input"),e=document.getElementById("drop-zone"),o=document.getElementById("back-to-tools"),c=document.getElementById("process-btn");t&&(t.addEventListener("change",V),t.addEventListener("click",()=>{t.value=""})),e&&(e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add("border-indigo-500")}),e.addEventListener("dragleave",()=>{e.classList.remove("border-indigo-500")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("border-indigo-500"),n.dataTransfer?.files.length&&z(n.dataTransfer.files)})),o&&o.addEventListener("click",()=>{window.location.href="/"}),c&&c.addEventListener("click",Z)}function V(t){const e=t.target;e.files?.length&&z(e.files)}async function z(t){const e=t[0];if(!e||e.type!=="application/pdf"){y("Invalid File","Please upload a valid PDF file.");return}F("Loading PDF...");try{const o=await e.arrayBuffer();a.pdfDoc=await U.load(o),a.file=e,W(),document.getElementById("options-panel")?.classList.remove("hidden")}catch(o){console.error(o),y("Error","Failed to load PDF file.")}finally{S()}}function W(){const t=document.getElementById("file-display-area");if(!t||!a.file||!a.pdfDoc)return;t.innerHTML="";const e=document.createElement("div");e.className="flex items-center justify-between bg-gray-700 p-3 rounded-lg";const o=document.createElement("div");o.className="flex flex-col flex-1 min-w-0";const c=document.createElement("div");c.className="truncate font-medium text-gray-200 text-sm mb-1",c.textContent=a.file.name;const n=document.createElement("div");n.className="text-xs text-gray-400",n.textContent=`${$(a.file.size)} â€¢ ${a.pdfDoc.getPageCount()} pages`,o.append(c,n);const p=document.createElement("button");p.className="ml-4 text-red-400 hover:text-red-300 flex-shrink-0",p.innerHTML='<i data-lucide="trash-2" class="w-4 h-4"></i>',p.onclick=C,e.append(o,p),t.appendChild(e),P({icons:k})}function C(){a.file=null,a.pdfDoc=null;const t=document.getElementById("file-display-area");t&&(t.innerHTML=""),document.getElementById("options-panel")?.classList.add("hidden");const e=document.getElementById("file-input");e&&(e.value="")}async function Z(){if(!a.pdfDoc){y("Error","Please upload a PDF file first.");return}F("Adding page numbers...");try{const t=document.getElementById("position").value,e=parseInt(document.getElementById("font-size").value)||12,o=document.getElementById("number-format").value,c=document.getElementById("text-color").value,n=O(c),p=a.pdfDoc.getPages(),E=p.length,M=await a.pdfDoc.embedFont(j.Helvetica);for(let g=0;g<E;g++){const b=p[g],H=b.getMediaBox(),v=b.getCropBox()||H,l=v.width,h=v.height,d=v.x||0,m=v.y||0;let B=o==="page_x_of_y"?`${g+1} / ${E}`:`${g+1}`;const f=M.widthOfTextAtSize(B,e),x=e,D=8,w=40,L=.04,N=Math.max(D,Math.min(w,l*L)),A=Math.max(D,Math.min(w,h*L)),i=Math.max(N,f/2+3),u=Math.max(A,x+3);let s=0,r=0;switch(t){case"bottom-center":s=Math.max(i,Math.min(l-i-f,(l-f)/2))+d,r=u+m;break;case"bottom-left":s=i+d,r=u+m;break;case"bottom-right":s=Math.max(i,l-i-f)+d,r=u+m;break;case"top-center":s=Math.max(i,Math.min(l-i-f,(l-f)/2))+d,r=h-u-x+m;break;case"top-left":s=i+d,r=h-u-x+m;break;case"top-right":s=Math.max(i,l-i-f)+d,r=h-u-x+m;break}s=Math.max(d+3,Math.min(d+l-f-3,s)),r=Math.max(m+3,Math.min(m+h-x-3,r)),b.drawText(B,{x:s,y:r,font:M,size:e,color:R(n.r,n.g,n.b)})}const T=await a.pdfDoc.save();_(new Blob([new Uint8Array(T)],{type:"application/pdf"}),"paginated.pdf"),y("Success","Page numbers added successfully!","success",()=>{C()})}catch(t){console.error(t),y("Error","Could not add page numbers.")}finally{S()}}
